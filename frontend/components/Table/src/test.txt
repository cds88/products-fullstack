import { Product } from "@products/types";
import { ProductsTable, TableCell, TableHeader, TableTbody, TableTHead, TableTr, VirtuosoContainer } from "./styled";
import { Virtuoso, VirtuosoProps, TableVirtuoso } from "react-virtuoso";
import React, { Children } from "react";
import MUITableContainer from "@mui/material/TableContainer";
import MUITable from "@mui/material/Table";
import MUITableHead from "@mui/material/TableHead";
import MUITableRow from "@mui/material/TableRow";
import MUITableBody from "@mui/material/TableBody";
import MUITableCell from "@mui/material/TableCell";
import MUITablePaper from "@mui/material/Paper"


interface VirtualizedTableBodyProps {
  products: Product[];
  loadProducts: VirtuosoProps<Product, any>["endReached"];
 
}
const Table: React.FC<VirtualizedTableBodyProps> = ({
  products,
  loadProducts,
 
}) => {
  return     <VirtuosoContainer>
  <TableVirtuoso
    data={products}
    components={{
      Scroller: React.forwardRef( (props, ref)=><MUITableContainer  component={MUITablePaper}  ref={ref} {...props}/>),
      Table: (props) => <MUITable {...props} style={{borderCollapse:'separate'}}/>,
      TableHead: MUITableHead,
      TableRow: MUITableRow,
      TableBody: React.forwardRef( (props, ref) => <MUITableBody {...props} ref={ref} />)
    }}
    fixedHeaderContent={()=><MUITableRow>
      <MUITableCell>Title</MUITableCell>
      <MUITableCell>Category</MUITableCell>
      <MUITableCell>Brand</MUITableCell>
      <MUITableCell>Price</MUITableCell>
      <MUITableCell>Rating</MUITableCell>
      
    </MUITableRow>}
    // fixedHeaderContent={() => (
    //   <MUITable.TableRow>
    //     <MUITable.TableCell style={{ width: 150, background: 'white' }}>
    //       Name
    //     </MUITable.TableCell>
    //     <MUITable.TableCell style={{ background: 'white' }}>
    //       Description
    //     </MUITable.TableCell>
    //   </MUITable.TableRow>
    // )}

 
    itemContent={(index, product) => (
      <  >
        <MUITableCell>{product.title}</MUITableCell>
        <MUITableCell>{product.category}</MUITableCell>
        <MUITableCell>{product.brand}</MUITableCell>
        <MUITableCell>${product.price.toFixed(2)}</MUITableCell>
        <MUITableCell>{product.rating.toFixed(2)}</MUITableCell>
      </>
    )}
    endReached={loadProducts}
  />
</VirtuosoContainer>
  // return (
  //   <VirtuosoContainer>
  //     <Virtuoso
  //       data={products}
  //       as="table"
 
  //       components={{
  //         List: (props)=>{
  //           const {children, ref, style} = props
 
  //             return <ProductsTable ref={ref}  {...props} ><TableTbody    {...props}>{children}</TableTbody></ProductsTable>

  //         },
  //          Item: TableTr,
       

          
 
        
  //       }}
  //       itemContent={(index, product) => (
  //         <  >
  //           <TableCell>{product.title}</TableCell>
  //           <TableCell>{product.category}</TableCell>
  //           <TableCell>{product.brand}</TableCell>
  //           <TableCell>${product.price.toFixed(2)}</TableCell>
  //           <TableCell>{product.rating.toFixed(2)}</TableCell>
  //         </>
  //       )}
  //       endReached={loadProducts}
  //     />
  //   </VirtuosoContainer>
 // );
};

export default Table;
